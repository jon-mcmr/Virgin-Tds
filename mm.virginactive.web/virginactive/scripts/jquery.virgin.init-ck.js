/*global _gaq:false, Sys:false, google:false, directionsDisplay:false, _filters: false, FilterTriggered:false,showAllClubs: false, InfoBox: false, _SelectedClubLat: false, _SelectedClubLng:false, _SelectedClub:false, vaOptions: false *//***
Virgin Active
2011 McCormackMorrison
***/function are_cookies_enabled(){var e=navigator.cookieEnabled?!0:!1;if(typeof navigator.cookieEnabled=="undefined"&&!e){document.cookie="testcookie";e=document.cookie.indexOf("testcookie")!=-1?!0:!1}return e}(function(e){e.virginActive=e.virginActive||{};var t=!1,n=this;e.fn.preferences=function(){return this.each(function(){})};e.virginActive.init=function(t){var n=this,r=!1,i=e("html"),s=!1,o=!1;n.options=e.extend({},e.virginActive.init.defaults,t);n.functions={vaOnReady:function(){function u(){var t=e(this);t.addClass(t.attr("id")+"-hover dropdown-hover")}function a(){var t=e(this);t.removeClass(t.attr("id")+"-hover dropdown-hover")}function f(t){e("#change-country #country-wrap").css({display:"block"}).children("ul").stop(!0,!0).slideDown()}function l(){e("#change-country #country-wrap ul").stop(!0,!0).slideUp(function(){e("#change-country #country-wrap").css({display:"none"})})}var t={ajax:1,cmd:"ClubNamesList"},r=null;e("html").removeClass("nojs");e(".overlay-clubfilterlist").vaOverlay({replaceDivContent:!1,updateClubFilterList:!0});if(navigator.userAgent.match(/iPad/i)){s=!0;i.addClass("iPad")}else i.hasClass("touch")&&!navigator.userAgent.match(/iPad/i)&&(o=!0);if(i.is(".ie6")||o)e("select").styleSelects();else{e("select:not(.chzn-clublist)").chosen();e(".chzn-clublist").chosen({hasSearch:!0});i.hasClass("ie")&&e(".chzn-clublist").addClass("chzn-ie")}e("#reveal").hide();e("p.show").click(n.functions.showPromoPanel);e(".gaqTag").click(function(){if(typeof _gaq!="undefined"){var t=e(this),n=t.data("gaqcategory"),r=t.data("gaqaction"),i=t.data("gaqlabel");_gaq.push(["_trackEvent",n,r,i])}});e(".sitemap h3").each(function(){r=e(this);!r.next().is("h4")&&!r.next().is("ul")&&r.after("<ul><li>"+r.html()+"</li></ul>")});e("#skiplinks a").click(function(t){t.preventDefault();var n=e(this);if(n.attr("id")==="skipto-search")e("#search").focus();else if(n.attr("id")==="skipto-mainnav"){e("#nav-faci").addClass("dropdown-hover nav-faci-hover").children("a").attr("tabIndex","0").focus();n.blur()}else{e("#content").find("a:eq(0)").attr("tabIndex","0").focus();e("html,body").animate({scrollTop:e("#content").offset().top-28},2e3,"easeOutQuint")}});e("#nav-your .dropdown, #nav-memb .dropdown").sameHeightCols();e("#main-nav li.level1").hoverIntent({sensitivity:1,timeout:250,interval:100,over:u,out:a});e("#main-nav .active .dropdown").after('<div class="nav-indicator"></div>');e("#change-country a").mouseenter(function(){f()});e("#footer-sub").mouseleave(function(){l()});e("#change-country > a").toggle(function(e){e.preventDefault();f()},function(){l()});if(i.hasClass("no-touch")){e().UItoTop({easingType:"easeOutQuart"});document.body.offsetWidth>1140&&e("#toTop").removeClass("hidden");e(window).resize(function(){document.body.offsetWidth>1140?e("#toTop").removeClass("hidden"):e("#toTop").hasClass("hidden")===!1&&e("#toTop").addClass("hidden")})}e("input[placeholder], textarea[placeholder]").placeholder();e(".results-list").livequery(function(){var t=e(this);if(t.height()>100){var n=t.children("h2").text(),r=t.children("h3 span").text(),i=t.children("h3").text(),s=t.children("p").text();t.empty().append("<h2>"+n+"<h2><h3>"+i+"</h3><p>"+s+"</p>")}if(t.parent().hasClass("searchTerm")){t.parent().parent("a").addClass("searchTermWrap");var o=t.parent().data("seeallclubs");t.find("p").wrapInner("<span class='loads' />").append("<span class='seeall'>"+o+"</span>")}});e('img[src*="googleadservices"]').livequery(function(){e(this).addClass("googleadservices").css({"float":"left"})})},showPromoPanel:function(){var t=e(this);t.parent("div").toggleClass("showmore-active");e("#reveal").toggleClass("reveal").slideToggle(1e3,"easeOutQuint");t.children("a").text(t.children("a").text()=="Show more"?"Hide details":"Show more")},sitemap:function(){},workouts:function(){e("div.workout-article").not(":first").hide();e("#worksouts-sub a").click(function(t){t.preventDefault();var n=e(this),r=e("#worksouts-sub a").index(this);e("div.workout-article").hide();e("div.workout-article:eq("+r+")").show();e("#worksouts-sub li").removeClass("active");n.parent().addClass("active")})},addDatepicker:function(){var t=new Date;e(".datepicker").datepicker({showOn:"button",buttonImage:"/virginactive/images/icons/calendar.png",buttonImageOnly:!0,minDate:new Date(t.getFullYear(),t.getMonth(),t.getDate())})},addTreatmentToDropDown:function(){e(".treatment a").click(function(t){var n=e(this),r=n.data("treatment");e(".treatmentSelect > option").each(function(){r==this.value&&(this.selected=!0)});var i=e(".treatmentSelect").siblings("span");i!==null&&i.children(".select-text").text(r)})},membershipReciprocal:function(){e(".select-panel, .club-access-info").hide();var t=e(".club-access-info");e(".select-panel .btn-cta").click(function(n){n.preventDefault();typeof _gaq!="undefined"&&_gaq.push(["_trackEvent","Form","Submit","Multi-Club Access"]);t.slideDown();e(".clubs-locations").sameHeightCols()});e(".close-btn a").click(function(e){e.preventDefault();t.slideUp()})},cmfDials:function(){var t=e(".cmf"),n=[],r;!i.hasClass("no-csstransforms")&&!i.hasClass("ie9")&&t.each(function(t){var i=e(this);i.children("td:not(.details), li").each(function(t){var s=e(this);n.push(360*(e(this).find(".pc").text()/100));n[t]>180?r='<span class="cmf-dial"><span class="cmf-inner cmf-move"><span class="cmf-rotator cmf-move" style="-ms-transform:rotate('+n[t]+"deg); -moz-transform:rotate("+(n[t]-180)+"deg); -webkit-transform:rotate("+(n[t]-180)+"deg); -o-transform:rotate("+(n[t]-180)+'deg); "></span></span></span>':r='<span class="cmf-dial"><span class="cmf-inner"><span class="cmf-rotator" style="-ms-transform:rotate('+n[t]+"deg); -moz-transform:rotate("+n[t]+"deg); -webkit-transform:rotate("+n[t]+"deg); -o-transform:rotate("+n[t]+'deg); "></span></span></span>';s.children(".cmf-wrap").prepend(r);i.find(".cmf-dial:eq(1)").css({msTransform:"rotate("+n[0]+"deg)","-moz-transform":"rotate("+n[0]+"deg)","-webkit-transform":"rotate("+n[0]+"deg)","-o-transform":"rotate("+n[0]+"deg)"});i.find(".cmf-dial:eq(2)").css({msTransform:"rotate("+(n[0]+n[1])+"deg)","-moz-transform":"rotate("+(n[0]+n[1])+"deg)","-webkit-transform":"rotate("+(n[0]+n[1])+"deg)","-o-transform":"rotate("+(n[0]+n[1])+"deg)"})});n.length=0})},setupForms:function(){function t(t,n){var r=u;if(n.get_postBackElement().id==e(".btn-submit").attr("id")){e(".btn-submit").addClass("btn-disabled-"+a);typeof _gaq!="undefined"&&_gaq.push(["_trackEvent","Form","Submit",r]);if("ClubEnquiry"==r||r.indexOf("Offer-")!=-1){var i=document.createElement("script");i.async=!0;i.src="//d3c3cq33003psk.cloudfront.net/opentag-32825-68231.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(i,s)}c.get_isInAsyncPostBack()&&n.set_cancel(!0)}}function n(t){e(".select-row").length==1&&e(".select-row .chzn-single span").text()=="Select a club"&&e(".select-row").addClass("select-row-error").find(".chzn-single span").addClass("placeholder").end().siblings(".span1").css({display:"block"});e(".select-row-new select").attr("id",O);A=C.length>0?!0:!1;A&&e(".select-row-new").find(".chzn-single span").text()=="Select a club"||!A||i.hasClass("ie6")?e(".select-row-new").find(".icon-add").animate({opacity:0},function(){e(this).addClass("icon-add-hide")}):A&&!t.closest(".select-row").next().hasClass("select-row")&&t.closest(".select-row").find(".chzn-single span").removeClass("placeholder").end().find(".icon-add").removeClass("icon-add-hide").animate({opacity:1}).end().removeClass("select-row-error").siblings(".span1").css({display:"none"})}function r(){C.length=0,T.length=0,N.length=0;e(".select-row option:selected").each(function(){var t=e(this);if(t.text()!="Select a club"){C.push(t.text());T.push(t.val());N.push(t.data("email"))}});var t=e(".selectParentWrap");t.find(".clubName").val(C.join("|"));t.find(".clubGUID").val(T.join("|"));t.find(".clubEmail").val(N.join("|"))}function M(){_.text()=="Select a club"?_.addClass("placeholder"):_.removeClass("placeholder")}i.hasClass("ie")&&e("#content_0_centre_0_ctl00_drpHowDidYouFindUs").change(function(){var t=e(this);t.find("option:selected").text()=="Select"?e(this).next().children(".chzn-single").addClass("error").closest(".wrap").addClass("wrapErrorFullWidth").children("span.span1").css({display:"inline"}).parents(".wrap").removeClass("valid"):e(this).removeClass("error").next().children(".chzn-single").removeClass("error").closest(".wrap").removeClass("wrapErrorFullWidth").children("span").css({display:"none"}).parents(".wrap").addClass("valid")});e(".btn").click(function(t){e(this).blur()});e(".ui-datepicker .ui-datepicker-calendar a").live("click",function(){e("input.datepicker").blur()});var s=e(".btn-submit");if(s.length>0){var u="",a="",f="";typeof s.parent().attr("id")!="undefined"&&(u=s.parent().attr("id").substr(4));typeof e(".btn-submit").attr("class")!="undefined"&&(f=e(".btn-submit").attr("class").split(" "));for(var l=0;l<f.length;l++)f[l].substring(0,8)=="btn-cta-"&&(a=f[l].substr(f[l].lastIndexOf("-")+1));var c=Sys.WebForms.PageRequestManager.getInstance();c.add_initializeRequest(t)}if(e(".chzn-clublist").length>0){var h=e(".chzn-clublist"),p=e(".chzn-clublist").closest(".selectParentWrap"),d=h.next().find("span"),v=p.find("input.clubEmail"),m=p.find("input.clubGUID"),g=p.find("input.clubName"),y=h.children("option").length,b,w,E,S,x,T=[],N=[],C=[];if(h.hasClass("update-inputs")){g.val()!==""&&d.text(g.val());h.children("option[value='"+m.val()+"']").attr("selected","selected");h.change(function(){for(var t=0;t<y;t++)if(d.text()===h.children("option:eq("+t+")").text()){b=h.children("option:eq("+t+")").val();w=h.children("option:eq("+t+")").data("email")}v.val(w);m.val(b);g.val(d.text());i.hasClass("ie")&&(d.text()=="Select a club"?e(this).next().children(".chzn-single").addClass("error").closest(".wrap").addClass("wrapErrorFullWidth").children("span.span1").css({display:"inline"}):e(this).removeClass("error").next().children(".chzn-single").removeClass("error").closest(".wrap").removeClass("wrapErrorFullWidth").children("span").css({display:"none"}))})}else if(e(".enquiry-corporate select").hasClass("chzn-corporate-enquiry")){var k=e(".chzn-corporate-enquiry"),L=e(".select-row").children(".add-club"),A=!1,O=k.attr("id");e(".add-club .icon-add").live("click",function(t){t.preventDefault();k=e(".chzn-corporate-enquiry").last();e(".select-row").removeClass("select-row-new").children(".add-club").removeAttr("style");k.clone().insertAfter(e(this).closest(".select-row")).wrap("<div class='select-row select-row-new' />");e(".select-row-new").append(L.clone()).children("select").css({display:"block"}).removeClass("chzn-done").removeAttr("id");var n=e(".select-row").length;e(".select-row-new select").attr("name","content_0$centre_0$ctl00$findclub"+n).find('option[value="'+k.val()+'"]').remove();o?e(".select-row-new select").styleSelects():e(".select-row-new select").chosen();e(".select-row").length>1&&e(".select-row").find(".icon-add").addClass("icon-add-hide").end().find(".icon-del").removeClass("icon-del-hide").animate({opacity:1}).end().filter(".select-row-new").find(".icon-del").addClass("icon-del-hide")});e(".add-club .icon-del").live("click",function(t){t.preventDefault();e(this).closest(".select-row").remove();r();n(e(".select-row-new"))});e(".select-row select").live("change",function(t){r();n(e(this))})}else h.change(function(){var t="^[0-9A-Z]{32}$";if(this.value.match(t)){if(this.value!==""){var n={ajax:1,clubid:this.value,cmd:"GetClubUrlForId"},r="";h.hasClass("club-section-redirect")&&h.closest(".cta-wrap").data("url")!==null&&(r=h.closest(".cta-wrap").data("url"));e.get(document.location,n,function(e){window.location=e+r})}return!1}window.location=this.value;return!1})}var _=e(".chzn-container span");M();e("select.chzn-clublist").change(function(){M()});e(".select-wrap").livequery(function(){function t(){r.text()=="Select"?r.addClass("select-text"):r.removeClass("select-text")}var n=e(this),r=n.find(".styleSelect");t();e(".select-wrap select").change(function(){t()})});e(".contact-panel").hasClass("contact-panel-club")&&e(".contact-panel").parent().addClass("contact-wrap");var D=e(".contact-wrap"),P,H,B;D.find(".chzn-clublist").change(function(){var t=e(this);P="",H="",B="";P=t.next().find(".chzn-single span").text();H=t.find("option:selected").val();B=t.find("option:selected").data("email");if(t.hasClass("club-select-top")){e(e(".club-select-bottom")).val(e(this).val());e(e(".club-select-bottom")).trigger("liszt:updated");(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/blackberry*/)||navigator.userAgent.match(/android/i))&&e(".row-club-select-bottom").hide();if(e(".form-to-complete").hasClass("hidden")){e(".form-to-complete").removeClass("hidden");e(".form-completed").addClass("hidden");e(".form-text-field").val("");e(".msg-main-text").val("");e(".text").val("");e(".text").chosen();e(".club-select-bottom").chosen({hasSearch:!0});e(e(".club-select-bottom")).val(e(this).val());e(e(".club-select-bottom")).trigger("liszt:updated")}}else t.hasClass("club-select-bottom")&&e(".club-select-top").next().find(".chzn-single span").text(P);P=="Select a club"?e(".club-select-bottom").addClass("error").siblings("span:first").css({display:"inline"}).closest(".form-row").addClass("wrapErrorFullWidth").find(".chzn-single").addClass("error"):e(".club-select-bottom").removeClass("error").siblings("span:first").css({display:"none"}).closest(".form-row").removeClass("wrapErrorFullWidth").find(".chzn-single").removeClass("error");e("input.clubName").val(P);e("input.clubGUID").val(H);e("input.clubEmail").val(B)})},homepageSpecific:function(){e(".carousel-images").orbit({timer:!0,captions:!0,rotateIcons:!0,hotspots:!0});i.hasClass("no-touch")&&e(".carousel-btns li, .has-tooltip").each(function(t){var n=e(this),r=n.children("a");n.addClass("tooltip-"+t);r.hover(function(){var e=r.outerWidth()-24>130?r.outerWidth()-24:130;r.next(".tooltip:not(#clubfinder-panel)").css({width:e+"px"});r.next(".tooltip").stop(!0,!0).fadeIn().children(".tooltip-arrow").fadeIn();r.next(".tooltip:not(#clubfinder-panel)").css({top:"-"+(n.children(".tooltip").outerHeight()+25)+"px"})},function(){r.next(".tooltip").stop(!0,!0).fadeOut().children(".tooltip-arrow").fadeOut()})});e("#streetview-wrap a").hover(function(){e(this).closest("#streetview-wrap").removeClass("glow-active")},function(){e(this).closest("#streetview-wrap").addClass("glow-active")});e("#clubfinder-panel .close-btn a").click(function(t){t.preventDefault();e(this).closest("#clubfinder-panel").fadeOut()});e("#last-homeclub a").click(function(t){t.preventDefault();var n=e(this),r=n.height();n.addClass("confirmation").css({height:r+"px"});SetHomeClub_Header();setTimeout(function(){e("#clubfinder-panel").remove()},2e3)});e(".carousel-btns li:eq(0)").addClass("first");if(e(window).width()>1050){e('<p id="carousel-more" class="rep"><a href="#bottom"><span></span>More &rsaquo;</a></p>').appendTo("#carousel-wrap");e.autoscroll.init("#carousel-more a")}},setupImageRotator:function(){function d(e){f=r;e?r=e:r++;r==n.length&&(r=0);n.eq(r).addClass("active-slide").children(".carousel-header, .carousel-intro").css({display:"none"}).end().css({left:s+"px"}).stop(!0,!0).animate({left:0},u,function(){n.eq(r).children(".carousel-header, .carousel-intro").fadeIn(o/5)});p.eq(f).removeClass("active");p.eq(r).addClass("active");n.eq(f).removeClass("active-slide").children(".carousel-header, .carousel-intro").hide().end().stop(!0,!0).animate({left:-s+"px"},u);e&&v()}function v(){p.removeClass("active").eq(r).addClass("active");clearInterval(l);l=setInterval(function(e){d()},o)}var t=e("#carousel"),n=t.children("li"),r=0,i=n.length,s=t.width(),o=5e3,u=1e3,a,f,l=null;n.css({left:"-"+s+"px"}).children("img").css({display:"block"}).end().filter(":first").css({left:0}).addClass("active-slide");var c='<ul id="carousel-dots">';for(var h=0;h<i;h++)c+='<li><a href="#" class="rep"><span></span>Slide '+(h+1)+"</a></li>";c+="</ul>";e(c).appendTo(".title-wrap");var p=e("#carousel-dots a");p.eq(0).addClass("active");p.click(function(t){t.preventDefault();a=e("#carousel-dots a").index(e(this));d(a)});n.length>0&&(l=setInterval(function(e){d()},o))},setupTools:function(){i.hasClass("no-touch")&&e(".input-number").each(function(){e(this).attr("type","text")});var t=e(".tool-main").attr("id"),n="imperial",r=e("#"+t),s=r.find(".units-switch"),o=r.find(".form-inputs div:eq(0)"),u=r.find(".form-inputs div:eq(1)"),a=r.find(".result-message");s.on("click","a",function(t){var r=e(this),i=!0;s.children("a").removeClass("active").filter(r).addClass("active");n===r.data("unit")?i=!1:n=r.data("unit");o.find(".unit").text(s.children("a:eq(0)").data(n));u.find(".unit").text(s.children("a:eq(1)").data(n));if(i===!0&&e("#label-weight").val()!="Enter"){if(e("#label-weight").val()!=r.attr("data-weight-val")){r.attr("data-weight-val",e("#label-weight").val());n==="metric"&&e("#label-weight").val()?e("#label-weight").val(e.conversions.LbstoKg(e("#label-weight").val()).kg):n==="imperial"&&e("#label-weight").val()&&e("#label-weight").val(e.conversions.KgtoLbs(e("#label-weight").val()).pounds);r.siblings("a").attr("data-weight-val",e("#label-weight").val())}else e("#label-weight").val(e(this).siblings("a").attr("data-weight-val"));if(e("#label-height").val()!=r.attr("data-height-val")){r.attr("data-height-val",e("#label-height").val());n==="metric"&&e("#label-height").val()?e("#label-height").val(e.conversions.InchestoCms(e("#label-height").val())):n==="imperial"&&e("#label-height").val()&&e("#label-height").val(e.conversions.CmstoInches(e("#label-height").val()));r.siblings("a").attr("data-height-val",e("#label-height").val())}else e("#label-height").val(e(this).siblings("a").attr("data-height-val"))}return!1});r.find(".btn").click(function(i){i.preventDefault();e(this).blur();var s=o.children("input"),f=u.children("input"),l=s.data("type"),c=f.data("type"),h,p,d,v,m,g,y,b,w,E=!s.val()||isNaN(s.val()),S=!f.val()||isNaN(f.val());if(r.find(".form-inputs div:eq(2)").length>0){w=r.find(".form-inputs div:eq(2)");b=w.children("input");g=b.data("type");y=!b.val()||isNaN(b.val())}if(r.find(".form-inputs div:eq(3)").length>0)var x=r.find(".form-inputs div:eq(3)"),T=x.find("select"),N=x.find("select").data("type");if(E||S||y){h=a.data("errormsg");p=[];e(".show-results").hide().prev(".results-intro").show();E&&p.push(l);S&&p.push(c);y&&p.push(g);y&&b.select().focus();S&&f.select().focus();E&&s.select().focus();p.length>1&&(p=p.slice(0,p.length-1).join(", ").concat(" and "+p[p.length-1]));a.addClass("tools-error").html("<p>"+h+p+"</p>")}else{e(".results-intro").hide().next(".show-results").show();var C=function(){var t=e(".gender-select input:radio:checked").val(),r=parseInt(s.val()),i=parseInt(f.val()),o=parseInt(b.val()),u=T.attr("value");if(n==="imperial"){r*=2.54;i/=2.2}if(t==="female"){r*=1.7;i=i*9.6+655;o*=4.7}else{r*=5;i=i*13.7+66;o*=6.8}d=Math.ceil((i+r-o)*u);e(".update-result").text(d);a.html("")},k=function(){var t=s.val(),r=f.val();if(n==="imperial"){t*=2.54;r*=.45359237}d=Math.round(r/(t/100*t/100));e(".update-result").text(d);if(d>=30){v=a.data("obese");m=a.data("comment-obese")}else if(d>=25&&d<30){v=a.data("over");m=a.data("comment-over")}else if(d>=20&&d<25){v=a.data("optimum");m=a.data("comment-optimum")}else{v=a.data("under");m=a.data("comment-under")}a.removeClass("tools-error").html("<p>"+a.data("comment1")+" <strong>"+v+"</strong>. "+m+"</p>")},L=function(){var t;n==="imperial"?t=s.val()/f.val():t=s.val()*2.54/(f.val()*2.54);d=Math.round(t*100)/100;e(".update-result").text(d);if(d>=.9){v=a.data("extreme");m=a.data("comment-extreme")}else if(d>=.85&&d<.9){v=a.data("high");m=a.data("comment-high")}else if(d>=.8&&d<.85){v=a.data("average");m=a.data("comment-average")}else if(d>=.75&&d<.8){v=a.data("good");m=a.data("comment-good")}else{v=a.data("excellent");m=a.data("comment-excellent")}a.removeClass("tools-error").html("<p>"+e(".result-value .main").text()+" <strong>"+v+"</strong></p> <p>"+m+"</p>")},A=function(){var n=e(".result-marker"),r=0,i=24,s=0,o=0,u=0,a=0,f=0,l=[];if(t==="tool-bmi"){u=15;a=35;f=430;l=[[15,20,0,86,"sad"],[20,25,87,145,"smile"],[25,30,231,115,"neutral"],[30,35,346,84,"sad"]]}else if(t==="tool-whr"){u=.65;a=1;f=194;l=[[.55,.75,0,59,"smile"],[.75,.8,60,88,"smile"],[.8,.85,89,119,"neutral"],[.85,.9,120,149,"neutral"],[.9,.95,150,178,"sad"],[.95,1,179,206,"sad"]]}if(d<=u){r=0;n.children().attr("class","smiley "+l[0][4])}else if(d>=a){r=f;n.children().attr("class","smiley sad")}else e.each(l,function(e,t){if(d>t[0]&&d<=t[1]){s=t[2];o=d-t[0];r=s+o*(t[3]/5);n.children().attr("class","smiley "+t[4])}});n.is(":visible")?t==="tool-bmi"?n.animate({left:r-i/2},1e3,"easeOutQuint"):n.animate({bottom:r+i/2},1e3,"easeOutQuint"):t==="tool-bmi"?n.css({left:r-i/2,display:"block"}):n.css({bottom:r+i/2,display:"block"})};if(t==="tool-whr"){L();A()}else if(t==="tool-bmi"){k();A()}else t==="tool-cc"&&C()}});e(document).keypress(function(t){if(t.which==13){e(this).blur();r.find(".btn").trigger("click")}})},setupAccordions:function(){var t=e(".accordion-list .accordion-item");t.length>0&&t.each(function(){var t=e(this),n=t.find("h5"),r=t.find(".accordion-body");n.hover(function(){e(this).addClass("accordian-hover")},function(){e(this).removeClass("accordian-hover")});n.bind("click",function(e){e.preventDefault();if(!r.is(":visible")){n.removeClass("closed").addClass("open");r.slideDown(300)}else{n.removeClass("open").addClass("closed");r.slideUp(300)}})})},setupClubFilter:function(){function s(n){var i=n.parents(".accordion-list").prev(".master-section").text(),s=n.parents(".accordion-item").attr("rel"),o=n.attr("rel"),u=e.trim(n.text());_filters[_filters.length]=""+o;FilterTriggered();var a=e("<li class='new-item'><a href='#' class='close-category'>"+s+": <span class='bold'>"+u+"</span></a></li>").css({display:"none"}).data("section",s).data("guid",o).click(function(){var t=0;while(t<_filters.length)_filters[t]==e(this).data("guid").toString()?_filters.splice(t,1):t++;FilterTriggered()}),f=t.find(".filter-section"),l=f.filter(function(){return e(this).attr("rel")==i});if(l.length>0){l.find("ul").append(a);l.find("ul li.new-item").slideDown(r).removeClass("new-item")}else{var c=e("<div class='filter-results filter-section' rel='"+i+"'><h3>"+i+"</h3></div>").append(e("<ul></ul>").append(a));t.append(c);t.find(".filter-section ul li.new-item").slideDown(r).removeClass("new-item")}}function o(i,s){var o=t.find(".filter-section"),a=0;while(a<_filters.length)_filters[a]==s.toString()?_filters.splice(a,1):a++;FilterTriggered();o.each(function(){var t=e(this),n=t.find("ul li"),i=n.filter(function(){return e(this).data("guid")==s});i.slideUp(r,function(){i.remove()});setTimeout(function(){t.find("ul li").length<1&&t.slideUp(r,function(){t.remove()})},r+20)});var f=n.find(".accordion-item").filter(function(){return e(this).attr("rel")==i}).find("ul li a"),l=f.filter(function(){return e(this).attr("rel")==s}).removeClass("active");u(l)}function u(e){var t=e.parents(".accordion-item");t.find(".accordion-body ul li a").hasClass("active")?t.addClass("selected"):t.removeClass("selected")}var t=e("#filter-results-panel"),n=e(".narrow-by-filter");if(n.length>0){var r=300,i=n.find(".accordion-item ul li a");e(".narrow-by-filter a").each(function(){if(e(this).attr("rel")==_filters){var t=e(this);t.addClass("active").closest(".accordion-body").css({display:"block"}).prev("h5").removeClass("closed").addClass("open");u(t);s(t)}});i.bind("click",function(){if(e(this).hasClass("active")){e(this).removeClass("active");var t=e(this).attr("rel"),n=e(this).parents(".accordion-item").attr("rel");o(n,t)}else{e(this).addClass("active");u(e(this));s(e(this))}return!1});e("a.close-category").live("click",function(){if(e(this).parents("li").length>0){var t=e(this).parents("li").data("guid"),n=e(this).parents("li").data("section");o(n,t);return!1}})}},clubsGoogleMapsSetup:function(){var t=e("#map-canvas");if(t.length>0){var n=e("#va-map-panels .map-info-panel");if(n.length>0){var r=!1,i=0,s=!1,o=e("#va-map-panels .map-center");if(o.length>0){var u=o.find(".va-marker-lat").val(),a=o.find(".va-marker-lng").val();s=!0}var f=new google.maps.LatLngBounds;n.each(function(t){var n=e(this),s=n.find(".va-marker-lat").val(),o=n.find(".va-marker-lng").val(),u=new google.maps.LatLng(s,o),a={};showAllClubs===!0&&f.extend(u);if(!r){if(showAllClubs===!1){var l=new google.maps.LatLng(_SelectedClubLat,_SelectedClubLng);a={zoom:14,center:l,mapTypeId:google.maps.MapTypeId.ROADMAP}}else a={zoom:11,center:u,mapTypeId:google.maps.MapTypeId.ROADMAP};i=new google.maps.Map(document.getElementById("map-canvas"),a);r=!0}var c=new google.maps.MarkerImage("/virginactive/images/panels/marker-va.png",new google.maps.Size(24,34),new google.maps.Point(0,0),new google.maps.Point(12,34)),h=new google.maps.MarkerImage("/virginactive/images/panels/marker-shadow.png",new google.maps.Size(44,34),new google.maps.Point(0,0),new google.maps.Point(12,34)),p={type:"poly",coord:[12,0,16,1,18,2,19,3,20,4,21,5,21,6,22,7,22,8,22,9,22,10,22,11,22,12,22,13,22,14,22,15,22,16,21,17,21,18,20,19,20,20,19,21,19,22,18,23,18,24,17,25,16,26,16,27,15,28,14,29,14,30,13,31,12,32,12,33,11,33,11,32,10,31,9,30,8,29,8,28,7,27,7,26,6,25,5,24,5,23,4,22,4,21,3,20,3,19,2,18,2,17,1,16,1,15,1,14,1,13,0,12,0,11,1,10,1,9,1,8,1,7,2,6,2,5,3,4,4,3,5,2,7,1,11,0,12,0]},d=new google.maps.Marker({map:i,draggable:!1,icon:c,shadow:h,shape:p,position:u,visible:!0}),v=n.get(0),m={content:v,disableAutoPan:!1,maxWidth:0,alignBottom:!0,pixelOffset:new google.maps.Size(-184,-50),zIndex:null,boxStyle:{width:"370px"},closeBoxURL:"",infoBoxClearance:new google.maps.Size(10,10),isHidden:!1,pane:"floatPane",enableEventPropagation:!1},g=new InfoBox(m);showAllClubs===!1&&t==_SelectedClub&&g.open(i,d);google.maps.event.addListener(d,"click",function(e){g.open(i,this)});n.find(".close").click(function(){g.close()})});showAllClubs===!0&&i.fitBounds(f)}}},clubsSetup:function(){function a(){e(".timetable tr").removeClass("highlight").filter(":visible:odd").addClass("highlight")}function f(e){var t,n=s.length,r=[];for(var i=0;i<n;i++){t=e[i].replace(/ & |, | /g,"-");r.push(t)}return r.sort()}function l(t,n){var r=s.length,i='<ul id="list-classes">';for(var u=0;u<r;u++)i+='<li><a href="#" class="'+o[u]+'">'+s[u]+"</a></li>";i+="</ul>";e(i).insertAfter(e(".filter-class"));e("#list-classes").css({width:e(".filter-class").width()})}e(".clubs_height_controller").css("min-height",e("#carousel-wrap").height()-40);e(window).resize(function(){setTimeout(function(){e(".clubs_height_controller").css("min-height",e("#carousel-wrap").height()-40)},5)});e.autoscroll.init(".jump-nav a");var t=e(".icon-print");t.length>0&&t.click(function(e){e.preventDefault();window.print()});var n,r;e(".filter-tabs ul a").click(function(t){t.preventDefault();var i=e(this);e(".filter-tabs ul a").removeClass("active").filter(i).addClass("active");var s=i.attr("class").split(" ");for(var o=0;o<s.length;o++)s[o].substr(0,5)=="show_"&&(n=s[o].substring(s[o].indexOf("_")+1));r=e(".filter-tabs").attr("id");r=r.substring(0,r.indexOf("-"));var u=r=="timetable"?e(".timetable"):e(".people-list li");n!="all"?u.removeClass("hide-filtered").not("."+r+"_"+n).addClass("hide-filtered").removeAttr("style"):r=="timetable"?i.closest(".timetable-wrap").hasClass("timetable-filtered")?e(".timetable-wrap .timetable").each(function(){e(this).hasClass("no-classes")?e(this).addClass("hide-filtered"):e(this).removeClass("hide-filtered")}):u.stop(!0,!0).removeClass("hide-filtered").fadeIn().removeAttr("style").find("tbody tr").removeAttr("style"):u.stop(!0,!0).removeClass("hide-filtered").fadeIn().removeAttr("style").find(".people-list li a").removeAttr("style");r=="timetable"&&a();e(".timetable-wrap .timetable").each(function(){var t=e(this);if(t.is(":visible")&&t.find("tbody tr").length===0){t.addClass("no-classes");t.find(".no-classes").length>0&&t.find(".no-classes").remove();t.append('<p class="no-classes">Sorry, there is no class information available for today</p>')}})});a();if(e(".timetable-wrap").length>0){var i=e(".timetable-wrap"),s=[],o;i.find("span.classname").each(function(){s.push(e(this).text())});if(s.length>0){s=e.unique(s);o=f(s);l(s.sort(),o)}i.find("span.classname").each(function(){var t=e(this),n=t.text();n=n.replace(/ & |, | /g,"-");t.parent().parent().addClass(n)});e(".filter-class").css({width:e(".filter-class a").outerWidth()});e(".filter-class a").click(function(t){t.preventDefault();var n=e(this);if(n.hasClass("clear-filter")){e(".filter-class a").removeClass("clear-filter").text(n.text()==n.data("clearfilter")?n.data("filterbyclass"):n.data("clearfilter")).blur().closest(".timetable-wrap").removeClass("timetable-filtered");e(".timetable-wrap").children(".timetable").each(function(){var t=e(this);t.removeClass("hide-filtered no-classes").find(".no-classes").remove();t.find("tr").each(function(){e(this).show()})});a()}else n.parent().next().slideToggle(600,"easeOutQuint")});var u=e(".classtip span");e(u).hide();e(".classtip").not(".click").hover(function(){e(this).find(u).stop(!0,!0).fadeToggle()});e(".classtip.click").click(function(){e(".classtip.click span").stop(!0,!0).fadeOut();if(e(this).hasClass("active")==0){e(this).find(u).stop(!0,!0).fadeIn();e(".classtip.click").removeClass("active");e(this).addClass("active")}else e(".classtip.click").removeClass("active")});e("#list-classes a").click(function(t){t.preventDefault();var n=e(this),r=e(this),i=e(".filter-class a");n.closest("ul").hide();i.text(i.data("clearfilter"));i.addClass("clear-filter").closest(".timetable-wrap").addClass("timetable-filtered");e(".timetable").removeClass("hide-filtered").find("tr").show();e(".timetable-wrap tbody tr").each(function(){var t=e(this);t.hasClass(n.attr("class"))||t.hide()});e(".timetable-wrap .timetable").each(function(){var t=e(this);if(t.find("tbody tr:visible").length===0){t.addClass("hide-filtered no-classes");t.find("p .no-classes").length===0&&t.append('<p class="no-classes">Sorry, there is no class information for '+n.text()+" available today</p>")}});a()})}},showFirstThree:function(){e(".show-limit").each(function(){var t=e(this);t.children("section").length>3?t.children(":nth-child(4)").addClass("show-all-link").append('<p class="show-all"><a href="#">Show all</a></p>').nextAll().hide():t.children("li").length>3&&t.children(":nth-child(3)").addClass("show-all-link").append('<p class="show-all"><a href="#">Show all</a></p>').nextAll().hide()});e(".show-limit .show-all").click(function(t){t.preventDefault();var n=e(this),r=n.children("a").text();n.toggleClass("show-all-less").parent().toggleClass("show-all-link").nextAll().slideToggle();n.children("a").text(r=="Show all"?"Show less":"Show all")})},clubsMapOverlay:function(){function T(){A();directionsDisplay.setMap(null);t.setCenter(p);L(p,"va",a.children("a").text());f.find(".btn").blur();e(".directions-tab a").addClass("inactive")}function N(){var t=v?p:f.find(".from input").val().replace(/ | /g,"+"),n=v?f.find(".to input").val().replace(/ | /g,"+"):p,r="",i="";if(!v&&t===""){f.find(".btn").blur();return!1}if(v&&n===""){f.find(".btn").blur();return!1}A();d=!0;e(".directions-tab a").removeClass("inactive");var l={origin:t,destination:n,travelMode:google.maps.DirectionsTravelMode[o],provideRouteAlternatives:!0};s.route(l,function(t,n){if(n==google.maps.DirectionsStatus.OK){directionsDisplay.setDirections(t);directionsDisplay.setRouteIndex(u);var s=t.routes;if(s.length>1){i+="<h4>"+e(".maptitle").data("suggestedroutes")+"</h4>";i+="<ul>";for(var o=0;o<s.length;o++){var l="",c=u==o?" selected-route":"";i+='<li><a class="suggested-route'+c+'" href="#" data-route="'+o+'">'+s[o].summary;s[o].legs[0].distance&&s[o].legs[0].distance.text&&(l+=s[o].legs[0].distance.text);s[o].legs[0].duration&&s[o].legs[0].duration.text&&(l+=", "+s[o].legs[0].duration.text);l!==""?i+=' <span class="dist-dur">'+l+"</span></a></li>":i+="</li>"}i+="</ul>";e(".routes-list").html(i);var h=g-e(".routes-list").height();e(".directions-list").css({height:h+"px"})}var p=t.routes[u].legs;L(p[0].start_location,"start",p[0].start_address);L(p[0].end_location,"end",a.children("a").text());var d=p[0].steps;for(var v=0;v<d.length;v++){var m=d[v].path;r+="<li>"+d[v].instructions;var y="";d[v].distance&&d[v].distance.text&&(y+=d[v].distance.text);d[v].duration&&d[v].duration.text&&(y+=", "+d[v].duration.text);y!==""?r+=' <span class="dist-dur">('+y+")</span></li>":
r+="</li>"}e(".directions-list").html(r)}else{T();f.find(".from input").attr("placeholder","0 results, please search again").val("")}});e(".tab-upper a").trigger("click")}function k(e){if(typeof e=="undefined"||e===null)e="va";i[e]||(i[e]=new google.maps.MarkerImage("/virginactive/images/panels/marker-"+e+".png",new google.maps.Size(24,34),new google.maps.Point(0,0),new google.maps.Point(12,34)));return i[e]}function L(e,n,i){var s=new google.maps.Marker({position:e,map:t,icon:k(n),shadow:E,shape:S,title:i,zIndex:Math.round(e.lat()*-1e5)<<5});r.push(s)}function A(){if(r){for(var e=0;e<r.length;e++)r[e].setMap(null);r.length=0}}function O(e){return e*Math.PI/180}function M(e){return e*180/Math.PI}function _(e,t,n,r){this._radius=6371;r=typeof r=="number"?r:typeof r=="string"&&r.trim()!==""?+r:NaN;r/=this._radius;n=O(n);var i=O(e),s=O(t),o=Math.asin(Math.sin(i)*Math.cos(r)+Math.cos(i)*Math.sin(r)*Math.cos(n)),u=s+Math.atan2(Math.sin(n)*Math.sin(r)*Math.cos(i),Math.cos(r)-Math.sin(i)*Math.sin(o));u=(u+3*Math.PI)%(2*Math.PI)-Math.PI;return new google.maps.LatLng(M(o),M(u))}var t,n,r=[],i={},s=new google.maps.DirectionsService,o="DRIVING",u=0,a=e(".location-address .location-title"),f=e(".get-directions"),l=a.children("a").data("lat"),c=a.children("a").data("lng"),h=20,p=new google.maps.LatLng(l,c),d=!1,v=!1,m="from",g=e(".directions-list").height(),y=new google.maps.LatLngBounds(_(l,c,225,h),_(l,c,45,h)),b=new google.maps.places.Autocomplete(f.find(".from input")[0],{bounds:y,types:["geocode"]});google.maps.event.addListener(b,"place_changed",function(){var e=b.getPlace();b.bindTo("bounds",t)});var w=new google.maps.places.Autocomplete(f.find(".to input")[0],{bounds:y,types:["geocode"]});google.maps.event.addListener(w,"place_changed",function(){var e=w.getPlace();w.bindTo("bounds",t)});i.va=new google.maps.MarkerImage("/virginactive/images/panels/marker-va.png",new google.maps.Size(24,34),new google.maps.Point(0,0),new google.maps.Point(12,34));var E=new google.maps.MarkerImage("/virginactive/images/panels/marker-shadow.png",new google.maps.Size(44,34),new google.maps.Point(0,0),new google.maps.Point(12,34)),S={type:"poly",coord:[12,0,16,1,18,2,19,3,20,4,21,5,21,6,22,7,22,8,22,9,22,10,22,11,22,12,22,13,22,14,22,15,22,16,21,17,21,18,20,19,20,20,19,21,19,22,18,23,18,24,17,25,16,26,16,27,15,28,14,29,14,30,13,31,12,32,12,33,11,33,11,32,10,31,9,30,8,29,8,28,7,27,7,26,6,25,5,24,5,23,4,22,4,21,3,20,3,19,2,18,2,17,1,16,1,15,1,14,1,13,0,12,0,11,1,10,1,9,1,8,1,7,2,6,2,5,3,4,4,3,5,2,7,1,11,0,12,0]},x={path:[],strokeColor:"#c00",strokeWeight:3};vaOptions=new google.maps.Map(document.getElementById("map-large"),{center:p,zoom:14,panControl:!1,mapTypeControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL},scaleControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP});t=new google.maps.Map(document.getElementById("map-large"),vaOptions);L(p,"va",a.children("a").text());directionsDisplay=new google.maps.DirectionsRenderer({suppressMarkers:!0,polylineOptions:x});directionsDisplay.setMap(t);f.find(".from input, .to input").focusin(function(){e(this).select()});e(".tab-upper a").click(function(t){t.preventDefault();var n=e(this);n.blur();if(n.hasClass("inactive"))return!1;var r=n.closest(".lower-panel"),i=e(".tab-upper a").index(n);e(".tab-upper a").removeClass("active").filter(n).addClass("active");e(".tab-lower .tab-detail").hide().filter(e(".tab-lower .tab-detail:eq("+i+")")).show()});e("#reverse a").click(function(t){t.preventDefault();f=e("#directions-form");f.toggleClass("directions-reversed");var n=f.hasClass("directions-reversed")?!0:!1,r=f.hasClass("directions-reversed")?"to":"from",i=f.hasClass("directions-reversed")?"from":"to",s=n?"Ending location":"Starting location",o=f.find("."+i+" input").val()||"";f.find("."+i+" input").attr({value:"",placeholder:a.children("a").text(),disabled:"disabled"});f.find("."+r+" input").removeAttr("disabled").attr({value:o,placeholder:s})});f.find(".btn").click(function(t){t.preventDefault();e(this).blur();N()});e(".transport a").click(function(t){t.preventDefault();var n=e(this);e(".transport a").children("span").removeClass("active");n.children("span").addClass("active");o=n.attr("id").toUpperCase();N()});a.children("a").click(function(e){e.preventDefault();T();f.find("."+m+" input").val("").attr("placeholder","Starting location")});e(".suggested-route").live("click",function(t){t.preventDefault();var n=e(this);e(".suggested-route").removeClass("selected-route");n.addClass("selected-route");u=n.data("route");N()});e(document).keypress(function(t){if(t.which==13){f.find("."+m+" input").blur();e(".get-directions .btn").trigger("click")}});var C=e(".icon-print");if(C.length>0){C.parents("body").addClass("hasMapOverlay");C.click(function(e){e.preventDefault();window.print()})}},streetview:function(){function i(e,n){return{location:{pano:n,description:"Virgin Active "+e.club+": "+e.name},links:e.links,copyright:"Imagery (c) 2011 Virgin Active",tiles:{tileSize:new google.maps.Size(1024,512),worldSize:new google.maps.Size(1024,512),centerHeading:e.originHeading,getTileUrl:function(e,n,r,i){return"/virginactive/images/streetview/"+t+"/"+e+"_0_0_0.jpg"}}}}function s(){e(".gmnoprint").prev().children().children("span").css({display:"none"})}var t="canary-riverside",n={pano:"reception",visible:!0,addressControl:!1,zoomControl:!1,panControl:!1,pov:{heading:0,zoom:1,pitch:-5},panoProvider:function(e){var t=rooms[e];return i(t,e)}},r=new google.maps.StreetViewPanorama(document.getElementById("streetview-canvas"),n);r.setPano("reception");e('<ul id="streetview-links"><li id="streetview-club1" class="streetview-club streetview-club-on">Canary Riverside</li><li id="streetview-club2" class="streetview-club">Northampton</li><li id="streetview-club3" class="streetview-club">West London</li></ul>').insertBefore("#streetview-canvas");e("#streetview-club1").live("click",function(){t="canary-riverside";r.setPano("reception");e(".streetview-club").removeClass("streetview-club-on").filter(this).addClass("streetview-club-on")});e("#streetview-club2").live("click",function(){t="northampton";r.setPano("n-reception");e(".streetview-club").removeClass("streetview-club-on").filter(this).addClass("streetview-club-on")});e("#streetview-club3").live("click",function(){t="west-london";r.setPano("wl-reception");e(".streetview-club").removeClass("streetview-club-on").filter(this).addClass("streetview-club-on")});e("text").live({mouseenter:function(){e(this).attr("fill","#c00").prev().prev().attr("fill","#c00").prev().prev().attr("fill","#c66")},mouseleave:function(){e(this).attr("fill","white").prev().prev().attr("fill","white").prev().prev().attr("fill","white")}});e('path[cursor="pointer"]').live({mouseenter:function(){e(this).attr("fill","#c00").next().attr("fill","#c00").prev().prev().attr("fill","#c00").prev().prev().attr("fill","#c66")},mouseleave:function(){e(this).attr("fill","white").next().attr("fill","white").prev().prev().attr("fill","white").prev().prev().attr("fill","white")}});e(".gmnoprint").livequery(function(){e(this).prev().children().css({padding:"5px 10px",backgroundColor:"#fff",color:"#333",border:"1px solid #666",fontWeight:"bold"}).children("span").css({display:"none"})});google.maps.event.addListener(r,"links_changed",s)}};n.functions.vaOnReady();n.functions.showFirstThree();r=!0};e.virginActive.init.defaults={animationSpeed:"1000",intervalFrequency:"10000"};e(document).ready(function(){e.va_init=new e.virginActive.init})})(jQuery);var virginactive=function(){var e=function(){$(".cookies .saveCookie .btn-submit").click(function(){$(this).addClass("activated")});$(".cookies").on("click",".cookieType input",function(){$(".cookies .saveCookie .info").attr("class","info");$(".cookies .saveCookie .confirmation").attr("class","confirmation hidden")})},t=function(){are_cookies_enabled()||$("#cookie-ribbon").remove()};return{init:function(){$(".cookies").length&&e();$("#cookie-ribbon").length&&t()}}}();$(document).ready(function(){virginactive.init()});