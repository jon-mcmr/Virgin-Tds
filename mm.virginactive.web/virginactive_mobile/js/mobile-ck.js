var virginactive={};virginactive.mobile=function(){var e=function(){var e=function(e){var t=e.coords.latitude,n=e.coords.longitude;window.location.href="/?lat="+t+"&long="+n},t=function(e){};return{init:function(){navigator.geolocation&&$(".button.geolocation").on("click",function(){navigator.geolocation.getCurrentPosition(e,t);return!1})}}}(),t=function(e){var t=function(){var e=$("body").width();$(".max-width").width(e);$(".max-width").css("margin","0 -20px")};$(window).on("resize",function(){t()});t()},n=function(){var e=!1,t,n,r=!1,i=function(e){var t=$("body").width();e.each(function(){var e=$(this),t=e.find("ul.items li"),n=t.length,r=0,i='<ul class="pager">',s=null;t.css("float","left").find("img,p").css("width",t.width());t.first().addClass("active");t.not(":first").css("width","0px").hide();t.each(function(){var e=r+1;i+="<li>"+e+"</li>";$(this).addClass("slideno_"+r);r++});t.last().prependTo(e.find("ul.items"));i+="</ul>";e.append(i);e.find(".pager li:first").addClass("active");s=e.find("ul.items li.active");t.css("height",s.find("img").height()).css("position","absolute");e.find("ul.items").css("height",s.find("img").height())});"ontouchstart"in document.documentElement&&document.documentElement.addEventListener("touchstart",c,!1);$(window).on("resize",function(){s(e)});s(e)},s=function(e){var t=$("body").width();e.each(function(){var e=$(this),n=e.find("ul.items li"),r=e.find("ul.items li.active"),i=n.length;e.find("li.active").css("width",t);n.find("img,p").css("width",t);n.css("height",r.find("img").height());e.find("ul.items").css("height",r.find("img").height())})},o=function(t,n,r,i,s,u){var a=s+u,f=i-u;t.show();if(a>=r){t.css("width",r).addClass("active");n.css("width","0").hide().removeClass("active");var l=$(".carousel ul.items");l.find("li:last").hasClass("active")?l.find("li:first").appendTo(l):l.find("li:first").hasClass("active")&&l.find("li:last").prependTo(l);e=!1}else{t.css("width",a);n.css("width",f);setTimeout(function(){o(t,n,r,f,a,u)},10)}},u=function(e,t,n,r,i,s){o(e,t,n,r,i,s)},a=function(t){if(e===!1){var n=40,r=$(".carousel ul.items"),i=$(".carousel ul.pager"),s=i.find(".active"),o=r.find("li.active");e=!0;if(t==="next"){o.next().css("left","auto").css("right","0px");o.css("right","auto").css("left","0px");u(o.next(),o,o.width(),o.width(),0,n);s.next().length?s.next().addClass("active"):i.find("li").first().addClass("active");s.removeClass("active")}else{o.prev().css("right","auto").css("left","0px");o.css("left","auto").css("right","0px");u(o.prev(),o,o.width(),o.width(),0,n);s.prev().length?s.prev().addClass("active"):i.find("li").last().addClass("active");s.removeClass("active")}}},f=function(){t=null;r=!1},l=function(e){if(r){var i=e.originalEvent.touches[0].pageX,s=e.originalEvent.touches[0].pageY,o=t-i,u=n-s;if(Math.abs(o)>=20){f();o>0?nextSlide():prevSlide();e.preventDefault()}}},c=function(e){if(e.touches.length===1){t=e.touches[0].pageX;n=e.touches[0].pageY;r=!0;$(document).bind("touchmove",l)}};nextSlide=function(){a("next")};prevSlide=function(){a("prev")};return{init:function(e){var t=$(e);t.length&&i(t)}}}(),r=function(){var e=function(){var e=parseInt($(".data_content").width(),10),t=1.54444444444444,n=parseInt(e/t-20,10);$(".map .map_content").html("");var r="http://maps.googleapis.com/maps/api/staticmap?zoom=14&size="+e+"x"+n+"&maptype=roadmap&markers=color:red|color:red|size:small|51.466848,-0.1428261&sensor=false";$(".map .data_content").append('<a href="https://maps.google.co.uk/?q=51.466848,-0.1428261"><img src="'+r+'" /></a>')};return{init:function(){$(".map .map_content").html("");var t=parseInt($(".data_content").width(),10),n=1.54444444444444,r=parseInt(t/n-20,10),i="http://maps.googleapis.com/maps/api/staticmap?zoom=14&size="+t+"x"+r+"&maptype=roadmap&markers=color:red|color:red|size:small|51.466848,-0.1428261&sensor=false";$(".map .data_content").append('<a href="https://maps.google.co.uk/?q=51.466848,-0.1428261"><img src="'+i+'" /></a>');$(window).on("resize",e)}}}(),i=function(){var e=function(){var s=$("fieldset input, fieldset select, fieldset textarea"),o=!0;s.each(function(e){var s=$(this),u=s.attr("class")||"",a=!0,f=s.val()||"";s.removeClass("error");if(u.indexOf("required")!==-1&&r(f)===!1){o=!1;t(s,s.attr("data-required"));a=!1}if(a)if(u.indexOf("email")!==-1){if(n(f)===!1){o=!1;t(s,s.attr("data-email"))}}else if(u.indexOf("phone")!==-1&&i(f)===!1){o=!1;t(s,s.attr("data-phone"))}});s.off();s.on("change",e);return o},t=function(e,t){var n=e.prop("tagName");e.addClass("error");n==="SELECT"?e.find(".default").html(t):e.attr("placeholder",t)},n=function(e){var t=!1;e.match(/^((?:(?:(?:\w[\.\-\+]?)*)\w)+)\@((?:(?:(?:\w[\.\-\+]?){0,62})\w)+)\.(\w{2,6})$/)&&(t=!0);return t},r=function(e){var t=!0;if(e===null||e==="")t=!1;return t},i=function(e){var t=!1;e.match(/^[-]?\d*\.?\d*$/)&&(t=!0);return t};return{init:function(){$("button[type=submit]").on("click",e)}}}();return{init:function(){e.init();n.init(".carousel");r.init();t();i.init();setTimeout(function(){window.scrollTo(0,1)},0)}}}();$(window).load(virginactive.mobile.init);